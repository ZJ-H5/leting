"use strict";angular.module("app").controller("compactmanagementCtrl",["$http","$scope","server","$state","dict",function(e,t,a,r,o){function s(){console.log(t.search),t.getSelectCheckBox();var e=m.toString(),r=c.toString();m.length=0,c.length=0,a.server().showPactList({projectId:t.projectId,signId:e,schemaId:r,searchKeys:t.search||"",pageNo:t.conf.currentPage||1,pageSize:t.conf.itemPageLimit||10},function(e){!0===e.result?(t.pactList=e.data.rows,t.conf.pageNo=e.data.pageNo,t.conf.total=Math.ceil(e.data.total/e.data.pageSize),t.conf.counts=e.data.total,t.counts=e.data.total,t.$broadcast("categoryLoaded")):alert(e.message),t.$apply()})}function p(){a.server().showSignNodedo({},function(e){!0===e.result&&(t.nodeSign=e.data.signList),t.$apply()})}function n(){a.server().showPropertyConditionsdo({projectId:t.projectId},function(e){!0===e.result&&(t.porpertyConditions=e.data),t.$apply()})}var i=setInterval(function(){$(".l-nav>li").length>0&&($(".l-nav>li").eq(5).addClass("cur"),clearInterval(i))},10);t.list={projectId:r.params.projectid,createUser:a.server().userId,toUserId:a.server().userId,type:3,status:1},t.listtop={projectId:r.params.projectid,roomId:"",createUser:a.server().userId,imgHost:a.server().imgHost,questiontype:4,projectflag:2,reloadajax:1,locationflag:1},t.projectId=r.params.projectid;var d=a.server().userId;t.imgHost=a.server().imgHost,t.action={},t.dataFollowUp=function(e,a,r){t.roomId=a,t.pacteId=r,t.action.reset(a)},t.myajax=function(){},t.mylocation=function(){r.go("compactdetail",{propertyId:t.roomId,projectId:r.params.projectid,pacteId:t.pacteId})},t.transferclick={},t.gcShowWin=function(e){t.transferclick.reset(e)},t.search="",t.searchs=function(){s()},t.conf={total:10,currentPage:1,itemPageLimit:10,isSelectPage:!1,isLinkPage:!1};var c=[],m=[];a.server().zjprojectdeleteById({id:t.projectId,userId:d},function(e){!0===e.result&&(t.project2=e.data.project,t.project2.createTime=o.timeConverter(t.project2.createTime),t.project2&&(t.project2.updateTime=o.timeConverter(t.project2.updateTime)),t.$apply())}),a.server().projectnamesel({projectId:t.projectId},function(e){!0===e.result?(t.projectname=e.data.projectName,t.number=e.data.number,t.$apply()):alert(e.message)}),t.doChange=function(e,t){var a=$('input[name="'+e+'"]:checkbox').length,r=$('input[name="'+e+'"]:checked').length;$('input[name="'+t+'"]:checkbox')[0].checked=a==r,s()},t.selectedAll=function(e){$('input[name="'+e+'s"]:checkbox').is(":checked")?$('input[name="'+e+'"]:checkbox').each(function(e){this.checked=!0}):$('input[name="'+e+'"]:checkbox').each(function(e){this.checked=!1}),s()},t.getSelectCheckBox=function(){$('input[name="con"]:checked').each(function(){c.push($(this)[0].id)}),$('input[name="sign"]:checked').each(function(){m.push($(this)[0].id)})},t.$watch("conf.currentPage + conf.itemPageLimit+projectnameinput",function(e){p(),n(),s()})}]).controller("comcompensateCtrl",["$http","$scope","server","$state","dict",function(e,t,a,r,o){t.pactId=r.params.pacteId,t.propertyId=r.params.propertyId,t.projectId=r.params.projectId,t.roomId=t.propertyId,t.approveId=r.params.approveId,t.pnumber=r.params.number,t.pflag=r.params.flag,t.pstatus=r.params.status,t.pupdateStatus=r.params.updateStatus;a.server().userId;t.list={roomId:t.roomId,projectId:r.params.propertyId,createUser:a.server().userId,toUserId:a.server().userId,type:3,status:2},t.listtop={roomId:r.params.propertyId,projectId:r.params.projectId,paciId:t.pactId,createUser:a.server().userId,imgHost:a.server().imgHost},function(){t.topData=[],t.bottomData=[],a.server().zjqueryCompensationInfodo({propertyId:t.propertyId},function(e){if(!0===e.result){if(e.data.length>0){for(var a=0;a<e.data.length;a++)0===e.data[a].Identification?t.topData.push(e.data[a]):t.bottomData.push(e.data[a]);t.totalMoneyCompensate=Number(e.data[0].totalMoneyCompensate).toFixed(2),t.monthlyInterimCompensate=Number(e.data[0].monthlyInterimCompensate).toFixed(2),t.$apply()}}else alert(e.message)})}()}]).controller("comcheckfalseCtrl",["$http","$scope","server","$state","dict","$rootScope",function(e,t,a,r,o,s){t.pactId=r.params.pacteId,t.propertyId=r.params.propertyId,t.projectId=r.params.projectId,t.roomId=t.propertyId,t.approveId=r.params.approveId,t.pnumber=r.params.number,t.pflag=r.params.flag,t.pstatus=r.params.status,t.pupdateStatus=r.params.updateStatus,t.headImg=a.server().headImg;a.server().userId;t.imgHost=a.server().imgHost,t.localhostimg=s.localhostimg,t.list={roomId:t.roomId,projectId:r.params.propertyId,createUser:a.server().userId,toUserId:a.server().userId,type:3,status:2},t.listtop={roomId:r.params.propertyId,projectId:r.params.projectId,paciId:t.pactId,createUser:a.server().userId,imgHost:a.server().imgHost};t.visibleOne=!1,t.visibleTwo=!1,t.visibleThree=!1,t.toggle=function(){t.visible=!t.visible},a.server().showComcheckFalsedo({propertyId:t.propertyId},function(e){!0===e.result&&(null===e.data.illegalInfoList?t.visiible=!0:t.illegalInfoList=e.data.illegalInfoList),t.$apply()},function(e){alert(e)})}]).controller("compactbasicCtrl",["$http","$scope","server","$state","dict","$rootScope",function(e,t,a,r,o,s){t.pactId=r.params.pacteId,t.propertyId=r.params.propertyId,t.projectId=r.params.projectId,t.roomId=t.propertyId,t.approveId=r.params.approveId,t.pnumber=r.params.number,t.pflag=r.params.flag,t.pstatus=r.params.status,t.pupdateStatus=r.params.updateStatus,t.imgHost=a.server().imgHost;t.no="暂无数据",t.type={number:1},t.templateList=[],t.list={roomId:t.roomId,projectId:r.params.propertyId,createUser:a.server().userId,toUserId:a.server().userId,type:3,status:2},t.listtop={roomId:r.params.propertyId,projectId:r.params.projectId,paciId:t.pactId,createUser:a.server().userId,imgHost:a.server().imgHost},a.server().compactdatalist({pactId:t.pactId},function(e){e.result?(t.templateList=e.data,s.pactInfocontent=t.templateList.content,t.templateList.status,t.templateList.name="查看"+t.templateList.name+"合同审批",t.$apply()):console.log("没有合同模板")}),t.templateSubmit=function(e){if(t.templateList.url){var o=a.server().imgHost,s=o+t.templateList.url;t.link=s,"0"==e&&window.open(r.href("pactInfo",{pactId:t.pactId,flag:1}))}else alert("没有合同信息")},t.pactId&&a.server().compactdatalist({pactId:t.pactId},function(e){e.result?(t.packlink=t.imgHost+e.data.url,t.$apply()):alert(e.message)}),a.server().zjroomessentialInformationdo({roomId:t.propertyId},function(e){!0===e.result?(t.ownership=e.data.ownership,t.room=e.data.room,t.room.createTime=o.timeConverter(t.room.createTime),t.room.updateTime=o.timeConverter(t.room.updateTime),e.data.surveyData&&(t.grossArea=e.data.surveyData.grossArea,t.areaOfBase=e.data.surveyData.areaOfBase,t.single=e.data.surveyData.single,t.survey=e.data.surveyData.survey),t.$apply()):alert(e.message)},function(e){alert(e)}),a.server().zjbasicCompensateInfodo({propertyId:t.propertyId,cause:""},function(e){!0===e.result?(t.monthlyInterimCompensate=e.data.monthlyInterimCompensate,t.totalMoneyCompensate=e.data.totalMoneyCompensate,t.compensateItemList=e.data.compensateItemList,t.builtInAreaList=e.data.builtInAreaList,t.$apply()):alert(e.message)},function(e){alert(e)}),a.server().zjpropertystagelistdo({roomId:t.propertyId,type:""},function(e){!0===e.result?(t.signList=e.data,t.$apply()):alert(e.message)},function(e){alert(e)})}]).controller("compactdetailCtrl",["$http","$scope","server","$state","dict","$rootScope",function(e,t,a,r,o,s){t.imgHost=a.server().imgHost,t.pactId=r.params.pacteId,t.propertyId=r.params.propertyId,t.projectId=r.params.projectId,t.roomId=t.propertyId,t.approveId=r.params.approveId,t.pnumber=r.params.number,t.pflag=r.params.flag,t.pstatus=r.params.status,t.pupdateStatus=r.params.updateStatus,t.headImg=a.server().headImg,t.trustSrc=function(e){return $sce.trustAsResourceUrl(t.imgHost+e)},t.localhostimg=s.localhostimg;a.server().userId;t.list={roomId:t.roomId,projectId:r.params.propertyId,createUser:a.server().userId,toUserId:a.server().userId,type:3,status:2},t.listtop={roomId:r.params.propertyId,projectId:r.params.projectId,paciId:t.pactId,createUser:a.server().userId,imgHost:a.server().imgHost},a.server().informationDetail({typeValue:2,dataId:t.propertyId},function(e){!0===e.result?null===e.data?(console.log(e.data),t.disVisible=!0):(t.data=e.data,t.disVisible=!1):t.disVisible=!0},function(e){}),a.server().basicInformation({roomId:t.propertyId},function(e){!0===e.result?(t.fuJianList=e.data,t.informations=e.data.surveyCount,t.$apply()):alert(e.message)},function(e){}),a.server().basicCompensate({propertyId:t.propertyId},function(e){!0===e.result?(t.compensates=e.data,t.compensateItemList=e.data.compensateItemList,t.builtInAreaList=e.data.builtInAreaList,t.$apply()):alert(e.message)},function(e){}),a.server().signList({roomId:t.propertyId},function(e){!0===e.result?(t.signList=e.data,t.$apply()):alert(e.message)},function(e){alert(e)})}]).controller("compactPayCtrl",["$http","$scope","server","$state","dict",function(e,t,a,r,o){function s(e,r,o){a.server().lajpactPayLoadListdo({propertyId:t.propertyId,pageNo:e,pageSize:r,status:o,type:""},function(e){if(!0===e.result){if(""==o){t.rowsPlan=e.data.rows;for(var a=0;a<t.rowsPlan.length;a++)0==t.rowsPlan[a].paymentStatus?t.rowsPlan[a].payment="未支付":1==t.rowsPlan[a].paymentStatus?t.rowsPlan[a].payment="已支付":2==t.rowsPlan[a].paymentStatus?t.rowsPlan[a].payment="截留":3==t.rowsPlan[a].paymentStatus?t.rowsPlan[a].payment="未收款":3==t.rowsPlan[a].paymentStatus&&(t.rowsPlan[a].payment="已收款");t.conf.total=e.data.pageCount,t.conf.counts=e.data.total,t.$broadcast("categoryLoaded")}else{t.rowsRecorde=e.data.rows;for(var a=0;a<t.rowsRecorde.length;a++)0==t.rowsRecorde[a].paymentStatus?t.rowsRecorde[a].payment="未支付":1==t.rowsRecorde[a].paymentStatus?t.rowsRecorde[a].payment="已支付":2==t.rowsRecorde[a].paymentStatus?t.rowsRecorde[a].payment="截留":3==t.rowsRecorde[a].paymentStatus?t.rowsRecorde[a].payment="未收款":3==t.rowsRecorde[a].paymentStatus&&(t.rowsRecorde[a].payment="已收款");t.conf2.total=e.data.pageCount,t.conf2.counts=e.data.total,t.$broadcast("categoryLoaded2")}t.$apply()}},function(e){alert(e)})}t.pactId=r.params.pacteId,t.propertyId=r.params.propertyId,t.projectId=r.params.projectId,t.roomId=t.propertyId,t.approveId=r.params.approveId,t.pnumber=r.params.number,t.pflag=r.params.flag,t.pstatus=r.params.status,t.pupdateStatus=r.params.updateStatus;t.pactId;t.func=function(e){return e.status>0},t.conf={total:10,currentPage:1,itemPageLimit:4,isSelectPage:!1,isLinkPage:!1},t.conf2={total:10,currentPage:1,itemPageLimit:4,isSelectPage:!1,isLinkPage:!1},t.list={roomId:t.roomId,projectId:r.params.propertyId,createUser:a.server().userId,toUserId:a.server().userId,type:3,status:2},t.listtop={roomId:r.params.propertyId,projectId:r.params.projectId,paciId:t.pactId,createUser:a.server().userId,imgHost:a.server().imgHost},s(t.conf.currentPage,t.conf.itemPageLimit,""),s(t.conf.currentPage,t.conf.itemPageLimit,1),t.$watch("conf.currentPage + conf.itemPageLimit",function(e){s(t.conf.currentPage,t.conf.itemPageLimit,"")}),t.$watch("conf2.currentPage + conf2.itemPageLimit",function(e){s(t.conf2.currentPage,t.conf2.itemPageLimit,1)})}]).controller("compactpageholderCtrl",["$http","$scope","server","$state","dict",function(e,t,a,r,o){function s(e,t){var a={title:{text:""},tooltip:{},animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",label:{normal:{show:!0,textStyle:{fontSize:12}}},legend:{x:"center",show:!1,data:["家人","朋友","亲戚"]},series:[{type:"graph",layout:"force",symbolSize:50,focusNodeAdjacency:!0,roam:!0,categories:[{name:"家人",itemStyle:{normal:{color:"#009800"}}},{name:"朋友",itemStyle:{normal:{color:"#4592FF"}}},{name:"亲戚",itemStyle:{normal:{color:"#3592F"}}}],label:{normal:{show:!0,textStyle:{fontSize:14}}},force:{repulsion:1e3},edgeSymbolSize:[4,50],edgeLabel:{normal:{show:!0,textStyle:{fontSize:12},formatter:"{c}"}},data:e,links:t,lineStyle:{normal:{opacity:.9,width:1,curveness:0}}}]};p.setOption(a)}t.no="-",t.pactId=r.params.pacteId,t.propertyId=r.params.propertyId,t.projectId=r.params.projectId,t.roomId=t.propertyId,t.approveId=r.params.approveId,t.pnumber=r.params.number,t.pflag=r.params.flag,t.pstatus=r.params.status,t.pupdateStatus=r.params.updateStatus;a.server().userId;t.list={roomId:t.roomId,projectId:r.params.propertyId,createUser:a.server().userId,toUserId:a.server().userId,type:3,status:2},t.listtop={roomId:r.params.propertyId,projectId:r.params.projectId,paciId:t.pactId,createUser:a.server().userId,imgHost:a.server().imgHost};Promise.all([function(){return new Promise(function(e,r){a.server().zjownershipqueryOwnerAndRecievedo({holderId:t.roomId},function(a){!0===a.result?(t.data=a.data,t.data&&t.data.forEach(function(e,a){switch(t.data[a].recieveType){case 1:t.data[a].recieveType="业权人收款";break;case 2:t.data[a].recieveType="其他人代收款";break;case 3:t.data[a].recieveType="未满18岁监护人待收款";break;case 4:t.data[a].recieveType="关联其他业权人收款"}}),t.$apply(),e(t.data)):r(a.message)})})}()]).then(function(e){console.log(e)},function(e){console.log(e)}),t.usedata=[],t.links=[],t.uhshifts={relationShip:"业权人",relationPersion:""},t.editInformation=function(e,r){a.server().zjownershipqueryOwnerRelationShipdo({id:e},function(e){if(!0===e.result){t.relationdata=e.data,t.relation=e.data.relation,t.uhshifts.relationPersion=t.relationdata.holderName,t.relation.unshift(t.uhshifts);for(var a=0;a<t.relation.length;a++)t.usedata[a]={name:t.relation[a].relationPersion,category:0===a?0:1,draggable:!0},t.links[a]={source:0,target:a+1,category:0,value:t.relation[a].relationShip};s(t.usedata,t.links)}else alert(e.message)},function(e){alert(e)})},t.makecoll=function(e,r){a.server().zjmakecollectionsqueryRelationShipdo({id:e},function(e){if(!0===e.result){t.relationdata=e.data,console.log(t.relationdata),t.relation=e.data.relation,t.uhshifts.relationPersion=t.relationdata.holderName,t.relation.unshift(t.uhshifts);for(var a=0;a<t.relation.length;a++)t.usedata[a]={name:t.relation[a].relationPersion,category:0===a?0:1,draggable:!0},t.links[a]={source:0,target:a+1,category:0,value:t.relation[a].relationShip};s(t.usedata,t.links)}else alert(e.message)},function(e){alert(e)})};var p=echarts.init(document.getElementById("main"))}]).controller("commissionSchemeCtrl",["$http","$scope","server","$state","dict",function(e,t,a,r,o){function s(e,r){a.server().commissionlist({propertyId:t.propertyId,projectId:"",pageNo:e,pageSize:r,searchKeys:"",status:"",paymentStatus:"",type:"",beginTime:"",endTime:"",exportType:""},function(e){if(!0===e.result){t.list=e.data.rows;for(var a=0;a<t.list.length;a++)0==t.list[a].paymentStatus?t.list[a].payment="未支付":1==t.list[a].paymentStatus?t.list[a].payment="已支付":2==t.list[a].paymentStatus?t.list[a].payment="截留":3==t.list[a].paymentStatus?t.list[a].payment="未收款":3==t.list[a].paymentStatus&&(t.list[a].payment="已收款");for(var a=0;a<t.list.length;a++)1==t.list[a].type?t.list[a].comtype="签约佣金":2==t.list[a].type?t.list[a].comtype="违建佣金":3==t.list[a].type&&(t.list[a].comtype="综合业务佣金");t.conf.total=e.data.pageCount,t.conf.counts=e.data.total,t.$apply(),t.$broadcast("categoryLoaded")}else alert(e.message)})}function p(e,r){a.server().paycommissiondatalist({propertyId:t.propertyId,projectId:"",pageNo:e,pageSize:r,status:"",exportType:""},function(e){if(!0===e.result){t.commissionlist=e.data.rows;for(var a=0;a<t.commissionlist.length;a++)t.commissionlist[a].paySatus=!1,0==t.commissionlist[a].paymentStatus?t.commissionlist[a].payment="未支付":1==t.commissionlist[a].paymentStatus&&(t.commissionlist[a].payment="已支付");for(var a=0;a<t.commissionlist.length;a++)1==t.commissionlist[a].type?t.commissionlist[a].comtype="签约佣金":2==t.commissionlist[a].type?t.commissionlist[a].comtype="违建佣金":3==t.commissionlist[a].type&&(t.commissionlist[a].comtype="综合业务佣金");t.conf2.total=e.data.pageCount,t.conf2.counts=e.data.total,t.$apply(),t.$broadcast("categoryLoaded2")}else alert(e.message)},function(e){})}t.pactId=r.params.pacteId,t.propertyId=r.params.propertyId,t.projectId=r.params.projectId,t.roomId=t.propertyId,t.approveId=r.params.approveId,t.pnumber=r.params.number,t.pflag=r.params.flag,t.pstatus=r.params.status,t.pupdateStatus=r.params.updateStatus;a.server().userId;t.list={roomId:t.roomId,projectId:r.params.propertyId,createUser:a.server().userId,toUserId:a.server().userId,type:3,status:2},t.listtop={roomId:r.params.propertyId,projectId:r.params.projectId,paciId:t.pactId,createUser:a.server().userId,imgHost:a.server().imgHost},t.commissiontype=[{id:1,name:"签约佣金",state:!1},{id:2,name:"违建佣金",state:!1},{id:3,name:"综合业务佣金",state:!1}],t.no="暂无数据",t.conf={total:10,currentPage:1,itemPageLimit:4,isSelectPage:!1,isLinkPage:!1},t.conf2={total:10,currentPage:1,itemPageLimit:4,isSelectPage:!1,isLinkPage:!1},t.$watch("conf.currentPage + conf.itemPageLimit",function(){s(t.conf.currentPage,t.conf.itemPageLimit)}),t.$watch("conf2.currentPage + conf2.itemPageLimit",function(){p(t.conf2.currentPage,t.conf2.itemPageLimit)})}]).controller("comsurveyinginfoCtrl",["$http","$scope","server","$state","dict",function(e,t,a,r,o){t.pactId=r.params.pacteId,t.propertyId=r.params.propertyId,t.projectId=r.params.projectId,t.roomId=t.propertyId,t.approveId=r.params.approveId,t.pnumber=r.params.number,t.pflag=r.params.flag,t.pstatus=r.params.status,t.pupdateStatus=r.params.updateStatus,t.no="暂无数据",t.hostname=a.server().imgHost;a.server().userId;t.list={roomId:t.roomId,projectId:r.params.propertyId,createUser:a.server().userId,toUserId:a.server().userId,type:3,status:2},t.listtop={roomId:r.params.propertyId,projectId:r.params.projectId,paciId:t.pactId,createUser:a.server().userId,imgHost:a.server().imgHost},a.server().surveyingInformationById({roomId:t.propertyId},function(e){if(!0===e.result){if(e.data&&e.data){t.surveyInfo=e.data,t.singleList=e.data.singleList,t.surveyList=e.data.surveyList,t.housesImg=e.data.housesImg;for(var a=[],r=[],o=[],s=0;s<t.surveyList.length;s++)"擅改商业"==t.surveyList[s].compensateName?a.push(t.surveyList[s]):"查违信息"==t.surveyList[s].compensateName?r.push(t.surveyList[s]):"临时建筑物"==t.surveyList[s].compensateName&&(o.push(t.surveyList[s]),console.log(o));t.arr=a,t.arr2=r,t.arr3=o}t.$apply()}else alert(e.message)},function(){alert("404请求失败")}),a.server().surveyingList({roomId:t.propertyId,type:2},function(e){!0===e.result?(t.surveyingList=e.data,console.log(t.surveyingList),t.$apply()):alert(e.message)},function(e){})}]).controller("linkorderCtrl",["$http","$scope","server","$state","dict",function(e,t,a,r,o){t.pactId=r.params.pacteId,t.propertyId=r.params.propertyId,t.projectId=r.params.projectId,t.roomId=t.propertyId,t.approveId=r.params.approveId,t.pnumber=r.params.number,t.pflag=r.params.flag,t.pstatus=r.params.status,t.pupdateStatus=r.params.updateStatus;a.server().userId;t.list={roomId:t.roomId,projectId:r.params.propertyId,createUser:a.server().userId,toUserId:a.server().userId,type:3,status:2},t.listtop={roomId:r.params.propertyId,projectId:t.projectId,paciId:t.pactId,createUser:a.server().userId,imgHost:a.server().imgHost},function(){a.server().zjrelatedlistdo({roomId:t.propertyId},function(e){!0===e.result?(t.data=e.data,t.$apply()):alert(e.message)},function(e){alert(e)})}()}]).controller("compactappendixCtrl",["$http","$scope","server","$state","dict",function(e,t,a,r,o){function s(){a.server().enclorurelist({propertyId:t.roomId},function(e){if(!0===e.result){t.list=e.data;var a=0;for(var r in t.list)a+=t.list[r].propertyAttachments.length;t.length=a,t.$apply()}else alert(e.message)},function(){alert("404请求失败")})}t.pactId=r.params.pacteId,t.propertyId=r.params.propertyId,t.projectId=r.params.projectId,t.roomId=t.propertyId,t.approveId=r.params.approveId,t.pnumber=r.params.number,t.pflag=r.params.flag,t.pstatus=r.params.status,t.pupdateStatus=r.params.updateStatus;var p=a.server().host,n=a.server().userId;t.list={roomId:t.roomId,projectId:r.params.propertyId,createUser:a.server().userId,toUserId:a.server().userId,type:3,status:2},t.listtop={roomId:r.params.propertyId,projectId:t.projectId,paciId:t.pactId,createUser:a.server().userId,imgHost:a.server().imgHost},s(),t.addannex=function(r,o){var i=new FormData,d=r[0];t.filename=d.name,i.append("multipartFile",d),e({method:"POST",url:p+"attachment/fielUpload.do",data:i,headers:{"Content-Type":void 0},transformRequest:angular.identity}).then(function(e){t.data=e.data.data,t.fileName=t.data.fileName,t.filePath=t.data.filePath,t.size=t.data.size;var r={filePath:t.filePath,fileName:t.fileName};a.server().enclosursave({attachment:JSON.stringify(r),propertyId:t.roomId,createUser:n,type:o},function(e){!0===e.result?(alert(e.message,function(){s()}),t.$apply()):alert(e.message)},function(e){})})},t.downenclosure=function(e){var a=p+"propertyAttachment/attachmentDownload.do";t.link=a+"?id="+e},t.deleteenclosure=function(e){a.server().deleteenclosure({id:e},function(e){!0===e.result?(alert(e.message,function(){s()}),t.data=e.message,t.$apply()):alert(e.message)},function(e){})}}]);