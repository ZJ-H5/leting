angular.module("app").controller("checkingFalseCtrl",["$http","$scope","server","$state","dict","$rootScope",function(e,t,a,r,o,l){function s(){a.server().checkingFalseList({propertyId:t.roomId},function(e){if(!0===e.result){t.falseList=e.data,t.illegalInfoList=e.data.illegalInfoList,t.illegalRule=e.data.illegalRule;var a=t.illegalInfoList.length?t.illegalInfoList.length:0;t.parentid=0==a?null:t.illegalInfoList[a-1].id,t.$apply()}else alert(e.message)})}function n(a,r){var o=new FormData;t.filename=a.name,o.append("multipartFile",a),e({method:"POST",url:t.hostname+"attachment/fielUpload.do",data:o,headers:{"Content-Type":void 0},transformRequest:angular.identity}).then(function(e){t.data=e.data.data,t.attachments.push({filePath:t.data.filePath,fileName:t.data.fileName,size:t.data.size})},function(e){alert(e)})}t.propertyId=r.params.roomId,t.roomId=r.params.roomId,t.projectId=r.params.projectid;var i=a.server().userId,d=t.roomId;t.hostname=a.server().imgHost,t.imgHost=a.server().imgHost,t.localhostimg=l.localhostimg,t.headImg=a.server().headImg,a.server().checkingFalseList({propertyId:d},function(e){!0===e.result?(t.falseList=e.data,console.log(e.data),t.$apply()):alert(e.message)},function(e){}),t.list={roomId:r.params.roomId,projectId:r.params.roomId,createUser:a.server().userId,toUserId:a.server().userId,type:3,status:2},t.listtop={projectId:r.params.projectid,roomId:r.params.roomId,createUser:a.server().userId,imgHost:a.server().imgHost,questiontype:4,projectflag:2,reloadajax:1,locationflag:1},s(),t.attachments=[],t.addannex=function(e){for(var t=0;t<e.length;t++)n(e[t],e.length)},t.deleteImg=function(e){t.attachments.splice(e,1)},t.showImg=function(e,a){$("."+e).dialog(),t.Imgattachment=a},t.animate=function(e,t){var a=$(".ck-ul").position().left,r=$(".ck-ul li").eq(0).width(),o=(t.length-1)*r;"prev"==e?0==a?$(".ck-ul").stop(!0,!0).animate({left:-o+"px"}):$(".ck-ul").stop(!0,!0).animate({left:a+r+"px"}):a==-o?$(".ck-ul").stop(!0,!0).animate({left:0}):$(".ck-ul").stop(!0,!0).animate({left:a-r+"px"})},t.addfalseinfo=function(e){a.server().addfalseinfo({propertyId:t.roomId,depict:t.falsetext,attachments:t.attachments?JSON.stringify(t.attachments):null,parentId:t.parentid,createUser:i,type:e},function(e){!0===e.result?(alert(e.message,function(){s()}),t.$apply()):alert(e.message)},function(){alert("404请求失败")})}}]);