"use strict";angular.module("app").directive("appHead",["cache","$http","server","$state","$rootScope","$cookieStore",function(e,a,t,m,n,s){return{restrict:"E",replace:!0,templateUrl:"view/template/public/head.html",link:function(e){var a=t.server().userId;e.imgHost=t.server().imgHost,e.casHost=t.server().casHost,e.propertyUrl=t.server().propertyUrl,e.headImg=t.server().headImg;var n=window.localStorage;e.avalue=n.getItem("a"),e.name=[{name:"首页",val:!1,class:!1,getItem:"",usename:"main"},{name:"我的工作",val:!1,class:!1,getItem:"",usename:"myJob"},{name:"项目管理",val:!1,class:!1,getItem:"",usename:"projectmanagement"},{name:"物业信息",val:!1,class:!1,getItem:e.avalue,usename:"propertyInfo",information:2},{name:"物业管理",val:!0,class:!1,getItem:e.avalue,usename:"totalPropertyList"},{name:"合同管理",val:!0,class:!1,getItem:e.avalue,usename:"compactmanagement"},{name:"审批管理",val:!0,class:!1,getItem:e.avalue,usename:"examine"},{name:"财务管理",val:!0,class:!1,getItem:e.avalue,usename:"finance"},{name:"物业移交",val:!0,class:!1,getItem:e.avalue,usename:"handOverProperty"},{name:"物业拆除",val:!0,class:!1,getItem:e.avalue,usename:"PropertyDismantle"},{name:"物业还建",val:!0,class:!1,getItem:e.avalue,usename:"propertyBuilt"},{name:"数据统计",val:!0,class:!1,getItem:e.avalue,usename:"dataSurvey"},{name:"知识库",val:!0,class:!1,getItem:e.avalue,usename:"knowledge"},{name:"系统设置",val:!0,class:!1,getItem:e.avalue,usename:"systemset"}],e.flagIndex=n.getItem("flagindex"),e.flagIndex?(e.name.forEach(function(e,a){e.class=!1}),e.name[e.flagIndex].class=!0):(e.name.forEach(function(e,a){e.class=!1}),e.name[1].class=!0,n.setItem("flagindex",1)),e.locationTitleName=function(a,t){n.setItem("b",a),n.setItem("f",""),n.setItem("j",""),n.setItem("flagindex",t),e.name[t].val?m.go(a,{projectid:n.getItem("a")}):2==e.name[t].information?(n.setItem("flagindex",3),window.location=e.casHost+e.propertyUrl):m.go(a)},e.exit=function(){document.location=t.server().loginOut,localStorage.removeItem("a"),s.remove("userId"),n.setItem("flagindex",1)},t.server().zjmUserImg({userId:a},function(a){a.result&&(e.nickname=a.data.nickname?a.data.nickname:"暂未设置",e.realname=a.data.realname?a.data.realname:"暂未设置",e.photoUrl=a.data.photoUrl,s.get("userId")||s.put("userId",a.data.id),e.$apply())})}}}]);