angular.module("app").directive("uiPagination",[function(){return{restrict:"EA",templateUrl:"view/template/public/pagination.html",replace:!0,scope:{conf:"="},link:function(i,e,t,a){i.$on("categoryLoaded",function(e,t){var a=i.page={},n=i.conf;n.pageLimit=[10,15,20,30,50],n.itemPageLimit?n.pageLimit.indexOf(n.itemPageLimit)&&(n.pageLimit.push(n.itemPageLimit),n.pageLimit=n.pageLimit.sort(function(i,e){return i-e})):n.itemPageLimit=n.pageLimit[0],i.pageList=[],i.pageListFn=function(){if(a.limit=n.total,a.defaultLimit=n.defaultLimit?n.defaultLimit:10,a.limit<a.defaultLimit)for(var e=1;e<=a.limit;e++)i.pageList.push(e);else if(Number(n.currentPage)<4){for(var e=1;e<5;e++)i.pageList.push(e);i.pageList.push("...",a.limit)}else if(Number(n.currentPage)>=a.limit-3){for(var e=a.limit-4;e<a.limit;e++)i.pageList.push(e);i.pageList.unshift(1,"...")}else{i.pageList=[];for(var e=Number(n.currentPage)-2;e<Number(n.currentPage)+2;e++)i.pageList.push(e);i.pageList.push("...",a.limit),i.pageList.unshift(1,"...")}},i.pageListFn(),i.changePage=function(i){"..."!=i&&(n.currentPage=i)},i.prevPage=function(){n.currentPage<=1||(n.currentPage-=1)},i.nextPage=function(){n.currentPage>=a.limit||(n.currentPage+=1)},i.selectPage=function(){},i.firstPage=function(){n.currentPage=1},i.lastPage=function(){n.currentPage=n.total},i.linkPage=function(){n.linkPage&&(n.linkPage=n.linkPage.replace(/[^0-9]/,""),(0==n.linkPage||n.linkPage>a.limit)&&(n.linkPage=a.limit),n.currentPage=n.linkPage)},i.$apply()})}}}]);